---
title: Validator
description: Simple request validation with Zod
---

# Validator

Add a validation middleware for `body`, `query`, and `params` using Zod schemas.

---

## Installation

<Tabs items={["npm", "pnpm", "bun"]}>
  <Tab value="npm">

```bash
npx zuro-cli add validator
```

  </Tab>
  <Tab value="pnpm">

```bash
pnpm dlx zuro-cli add validator
```

  </Tab>
  <Tab value="bun">

```bash
bun x zuro-cli add validator
```

  </Tab>
</Tabs>

---

## What Gets Added

<Files>
  <Folder name="src" defaultOpen>
    <Folder name="middleware" defaultOpen>
      <File name="validate.ts" />
    </Folder>
  </Folder>
</Files>

Dependency installed: `zod`

---

## Usage

### Basic example

```ts
import { Router } from "express";
import { z } from "zod";
import { validate } from "./middleware/validate";

const router = Router();

const createUserSchema = z.object({
  body: z.object({
    name: z.string().min(2),
    email: z.string().email(),
  }),
});

router.post("/users", validate(createUserSchema), (req, res) => {
  const { name, email } = req.body;
  res.json({ name, email });
});
```

### Query + Params example

```ts
const listPostsSchema = z.object({
  query: z.object({
    page: z.coerce.number().min(1).default(1),
    limit: z.coerce.number().min(1).max(100).default(20),
  }),
  params: z.object({
    userId: z.string().uuid(),
  }),
});

router.get("/users/:userId/posts", validate(listPostsSchema), (req, res) => {
  const { page, limit } = req.query;
  const { userId } = req.params;
  res.json({ page, limit, userId });
});
```

---

## Middleware API

```ts
validate(schema);
```

Your schema should validate this shape:

```ts
{
  body?: unknown;
  query?: unknown;
  params?: unknown;
}
```

---

## Behavior

1. Validates request input with Zod.
2. Writes parsed values back to `req.body`, `req.query`, and `req.params`.
3. Returns `422` on validation errors:

```json
{
  "status": "error",
  "code": "VALIDATION_ERROR",
  "message": "Validation failed",
  "errors": [{ "path": "body.email", "message": "Invalid email" }]
}
```

4. Passes non-Zod errors to `next(error)`.

---

## Works with Error Handler

Validator returns validation responses directly by default.

If anything else throws, it goes to your error middleware:

```bash
npx zuro-cli add error-handler
```

---

## Troubleshooting

- `Cannot find module './middleware/validate'`: run the install command inside a Zuro project.
- `422 Validation failed`: check your request body matches the Zod schema fields and types.
- Schema not validating `query`/`params`: make sure your schema wraps them in `z.object({ query: ..., params: ... })`.

---

## Next Steps

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
  <a href="/docs/error-handler" className="block border border-border rounded-xl p-5 bg-card hover:border-green-500/50 transition-colors no-underline">
    <h3 className="font-bold text-foreground mb-1">→ Add Error Handler</h3>
    <p className="text-sm text-muted-foreground">Centralized API error responses</p>
  </a>

  <a href="/docs/auth" className="block border border-border rounded-xl p-5 bg-card hover:border-green-500/50 transition-colors no-underline">
    <h3 className="font-bold text-foreground mb-1">→ Add Auth</h3>
    <p className="text-sm text-muted-foreground">User auth and protected routes</p>
  </a>
</div>
